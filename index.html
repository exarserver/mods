<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>مولد مودات ماين كرافت</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a5f3a 0%, #2d8f5f 50%, #1a7a5a 100%);
            min-height: 100vh;
            color: white;
            direction: rtl;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .header h1 {
            font-size: 2.5em;
            background: linear-gradient(45deg, #4ade80, #22d3ee);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }
        
        .form-container {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(74, 222, 128, 0.3);
        }
        
        .platform-selector {
            margin-bottom: 20px;
        }
        
        .platform-selector label {
            display: inline-block;
            margin-left: 20px;
            cursor: pointer;
        }
        
        .platform-selector input[type="radio"] {
            margin-left: 8px;
        }
        
        textarea {
            width: 100%;
            height: 120px;
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(74, 222, 128, 0.5);
            border-radius: 10px;
            padding: 15px;
            color: white;
            font-size: 16px;
            resize: none;
            margin-bottom: 20px;
        }
        
        textarea::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }
        
        .generate-btn {
            width: 100%;
            background: linear-gradient(45deg, #10b981, #14b8a6);
            border: none;
            border-radius: 10px;
            padding: 15px;
            color: white;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .generate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
        }
        
        .generate-btn:disabled {
            background: #6b7280;
            cursor: not-allowed;
            transform: none;
        }
        
        .result-container {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 25px;
            margin-top: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(74, 222, 128, 0.3);
            display: none;
        }
        
        .mod-info h2 {
            color: #4ade80;
            margin-bottom: 10px;
        }
        
        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 10px;
            margin: 20px 0;
        }
        
        .feature-item {
            background: rgba(74, 222, 128, 0.2);
            padding: 10px;
            border-radius: 8px;
        }
        
        .code-preview {
            background: rgba(0, 0, 0, 0.5);
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            overflow-x: auto;
        }
        
        .code-preview pre {
            color: #4ade80;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            white-space: pre-wrap;
        }
        
        .download-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin-top: 20px;
        }
        
        .download-btn {
            background: linear-gradient(45deg, #3b82f6, #8b5cf6);
            border: none;
            border-radius: 8px;
            padding: 12px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .download-btn:hover {
            transform: translateY(-1px);
        }
        
        .loading {
            text-align: center;
            padding: 20px;
        }
        
        .spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 4px solid #4ade80;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🎮 مولد مودات ماين كرافت</h1>
            <p>صف فكرة المود التي تريدها وسيقوم الذكاء الاصطناعي بإنشائها لك بالكامل!</p>
        </div>
        
        <div class="form-container">
            <div class="platform-selector">
                <label><strong>اختر المنصة:</strong></label><br><br>
                <label>
                    <input type="radio" name="platform" value="fabric" checked> Fabric
                </label>
                <label>
                    <input type="radio" name="platform" value="forge"> Forge
                </label>
            </div>
            
            <textarea id="modDescription" placeholder="مثال: أريد مود يضيف سيف جديد يسمى 'سيف الزمرد' يعطي قوة إضافية ويضيء في الظلام..."></textarea>
            
            <button class="generate-btn" onclick="generateMod()">🪄 إنشاء المود</button>
        </div>
        
        <div id="resultContainer" class="result-container">
            <div id="loadingDiv" class="loading" style="display: none;">
                <div class="spinner"></div>
                <p>جاري إنشاء المود... انتظر قليلاً</p>
            </div>
            
            <div id="modResult" style="display: none;">
                <div class="mod-info">
                    <h2 id="modName"></h2>
                    <p id="modDescription"></p>
                </div>
                
                <div id="featuresContainer">
                    <h3>🎯 الميزات:</h3>
                    <div id="features" class="features"></div>
                </div>
                
                <div>
                    <h3>💻 معاينة الكود:</h3>
                    <div class="code-preview">
                        <pre id="codePreview"></pre>
                    </div>
                </div>
                
                <div>
                    <h3>📋 تعليمات التثبيت:</h3>
                    <div class="code-preview">
                        <pre id="instructions"></pre>
                    </div>
                </div>
                
                <div class="download-section">
                    <button class="download-btn" onclick="downloadFile('mainClass', 'java')">📄 Main Class</button>
                    <button class="download-btn" onclick="downloadFile('buildFile', 'gradle')">🔧 Build File</button>
                    <button class="download-btn" onclick="downloadFile('configFile', 'json')">⚙️ Config File</button>
                    <button class="download-btn" onclick="downloadFile('instructions', 'txt')">📖 التعليمات</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let generatedMod = null;
        
        async function generateMod() {
            const description = document.getElementById('modDescription').value;
            const platform = document.querySelector('input[name="platform"]:checked').value;
            
            if (!description.trim()) {
                alert('يرجى كتابة وصف للمود');
                return;
            }
            
            document.getElementById('resultContainer').style.display = 'block';
            document.getElementById('loadingDiv').style.display = 'block';
            document.getElementById('modResult').style.display = 'none';
            
            try {
                const response = await fetch("https://api.anthropic.com/v1/messages", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                    },
                    body: JSON.stringify({
                        model: "claude-sonnet-4-20250514",
                        max_tokens: 4000,
                        messages: [
                            {
                                role: "user",
                                content: `أنشئ مود ماين كرافت كامل بناءً على هذا الوصف: "${description}"

المنصة: ${platform === 'fabric' ? 'Fabric' : 'Forge'}

يجب أن يتضمن الرد:
1. اسم المود ووصف مختصر
2. الكود الكامل للمود مع التعليقات
3. ملف build.gradle أو build.gradle.kts
4. ملف fabric.mod.json أو mods.toml حسب المنصة
5. تعليمات التثبيت

اجعل الكود بسيط ومفهوم للمبتدئين. استخدم أحدث إصدارات ماين كرافت (1.20+).

رد فقط بصيغة JSON صالحة بهذا الشكل:
{
  "modName": "اسم المود",
  "description": "وصف المود",
  "mainClass": "كود الكلاس الرئيسي",
  "buildFile": "محتوى build.gradle",
  "configFile": "محتوى fabric.mod.json أو mods.toml",
  "instructions": "تعليمات التثبيت والاستخدام",
  "features": ["قائمة الميزات"]
}

لا تضع أي شيء غير JSON صالح في ردك.`
                            }
                        ]
                    })
                });

                const data = await response.json();
                let responseText = data.content[0].text;
                
                // Clean up the response to extract valid JSON
                responseText = responseText.replace(/```json\n?/g, "").replace(/```\n?/g, "").trim();
                
                generatedMod = JSON.parse(responseText);
                displayMod(generatedMod);
                
            } catch (error) {
                console.error('Error:', error);
                alert('حدث خطأ في توليد المود. حاول مرة أخرى.');
            }
            
            document.getElementById('loadingDiv').style.display = 'none';
        }
        
        function displayMod(mod) {
            document.getElementById('modName').textContent = mod.modName;
            document.getElementById('modDescription').textContent = mod.description;
            
            // Display features
            const featuresContainer = document.getElementById('features');
            featuresContainer.innerHTML = '';
            if (mod.features) {
                mod.features.forEach(feature => {
                    const featureDiv = document.createElement('div');
                    featureDiv.className = 'feature-item';
                    featureDiv.textContent = '• ' + feature;
                    featuresContainer.appendChild(featureDiv);
                });
            }
            
            // Display code preview
            document.getElementById('codePreview').textContent = mod.mainClass.substring(0, 500) + (mod.mainClass.length > 500 ? '...' : '');
            
            // Display instructions
            document.getElementById('instructions').textContent = mod.instructions;
            
            document.getElementById('modResult').style.display = 'block';
        }
        
        function downloadFile(type, extension) {
            if (!generatedMod) return;
            
            let content = '';
            let filename = '';
            
            switch(type) {
                case 'mainClass':
                    content = generatedMod.mainClass;
                    filename = `${generatedMod.modName}.java`;
                    break;
                case 'buildFile':
                    content = generatedMod.buildFile;
                    filename = 'build.gradle';
                    break;
                case 'configFile':
                    content = generatedMod.configFile;
                    const platform = document.querySelector('input[name="platform"]:checked').value;
                    filename = platform === 'fabric' ? 'fabric.mod.json' : 'mods.toml';
                    break;
                case 'instructions':
                    content = generatedMod.instructions;
                    filename = 'README.txt';
                    break;
            }
            
            const blob = new Blob([content], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }
    </script>
</body>
</html>
